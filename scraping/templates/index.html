<html>

<title>Deck app</title>

<body>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">


    <div class= "d-flex flex-column align-items-center description">

        <form id="form">
            <input type="search" id="query" name="q" placeholder="Enter a url...">
            <button>Search</button>
        </form>
        <p>This site takes a url a for Magic: The Gathering deck and returns the associated decklist along with all of its data.</p>
        <p>Example: https://www.mtggoldfish.com/archetype/modern-death-s-shadow#paper</p>
        <p>Currently supported sites tappedout.net and mtggoldfish.com</p>
    </div>


    <p id = "deck">
        <span id = "num"></span>
        <span id = "name"></span>
    </p>


    <script>
      const f = document.getElementById('form');
      const q = document.getElementById('query');
      const url = 'https://deck-scraper.herokuapp.com/names/';

      async function submitted(event) {
        event.preventDefault();
        const response = await fetch(url + q.value);
        const data = await response.json();
        console.log(data);
        const {name, num} = data

        document.getElementById("name").textContent = name;
        document.getElementById("num").textContent = num;

        var x = document.getElementById("deck");

        if (x.style.display === "none"){
            x.style.display = "block";
        }
      }

      f.addEventListener('submit', submitted);
    </script>


</body>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>

</html>